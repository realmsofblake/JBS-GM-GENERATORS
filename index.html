<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JBS GM Generators</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 1rem;
      background: #f4f4f4;
    }
    h1 {
      text-align: center;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1rem;
    }
    .box {
      background: white;
      border: 1px solid #ccc;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .result {
      margin-top: 0.5rem;
      font-weight: bold;
      color: #333;
    }
    button {
      margin: 0.25rem 0.25rem 0 0;
    }
  </style>
</head>
<body>
  <h1>JBS GM Generators</h1>
  <div class="grid" id="generatorGrid"></div>

  <script>
    // --- Helper Functions ---
    function getRandomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function getWeightedRandomItem(options) {
      const expanded = [];
      options.forEach(opt => {
        for (let i = 0; i < opt.weight; i++) {
          expanded.push(opt.value);
        }
      });
      return getRandomItem(expanded);
    }

    // --- Generator Categories ---
    const generators = {
      "Male Name (Human)": ["John", "Edric", "Roland", "Balin", "Gareth"],
      "Male Name (Elf)": ["Theren", "Eldrin", "Felarion", "Galion", "Laeroth"],
      "Male Name (Dwarf)": ["Thrain", "Dorin", "Kargan", "Bofur", "Grundi"],
      "Female Name (Human)": ["Elena", "Rowena", "Isolde", "Marion", "Brida"],
      "Female Name (Elf)": ["Aeris", "Luthien", "Sylva", "Nimriel", "Yavanna"],
      "Female Name (Dwarf)": ["Dis", "Helga", "Breda", "Inga", "Gurda"],

      "Minor Loot": ["Silver ring", "Old scroll", "Small pouch of gems"],
      "Average Loot": ["Chainmail armor", "Spellbook", "Potion pack"],
      "Major Loot": ["Magical sword", "Dragon egg", "Ancient relic"],

      "NPC Disposition": () => getWeightedRandomItem([
        { value: "Friendly", weight: 30 },
        { value: "Neutral", weight: 40 },
        { value: "Suspicious", weight: 20 },
        { value: "Hostile", weight: 10 }
      ]),

      "Weather": () => getWeightedRandomItem([
        { value: "Clear skies", weight: 50 },
        { value: "Cloudy", weight: 20 },
        { value: "Stormy", weight: 15 },
        { value: "Torrential rain", weight: 10 },
        { value: "Snowstorm", weight: 5 }
      ]),

      "Wilderness Encounter (Forest)": () => getWeightedRandomItem([
        { value: "Bandits ambush", weight: 15 },
        { value: "Peaceful druid circle", weight: 25 },
        { value: "Giant spider nest", weight: 20 },
        { value: "Abandoned camp", weight: 30 },
        { value: "Forest fire", weight: 10 }
      ]),
      "Wilderness Encounter (Mountain)": () => getWeightedRandomItem([
        { value: "Rockslide", weight: 20 },
        { value: "Wyvern sighting", weight: 10 },
        { value: "Hermit cave", weight: 25 },
        { value: "Snowstorm", weight: 30 },
        { value: "Mine collapse", weight: 15 }
      ]),
      "Wilderness Encounter (Plains)": () => getWeightedRandomItem([
        { value: "Stampede", weight: 15 },
        { value: "Nomad encampment", weight: 25 },
        { value: "Fey circle", weight: 20 },
        { value: "Traveling merchant", weight: 30 },
        { value: "Lightning strike", weight: 10 }
      ]),
      "Wilderness Encounter (Jungle)": () => getWeightedRandomItem([
        { value: "Disease-carrying insects", weight: 20 },
        { value: "Lost ruins", weight: 30 },
        { value: "Tribal warriors", weight: 20 },
        { value: "Poisonous plants", weight: 15 },
        { value: "Panther attack", weight: 15 }
      ]),
      "Wilderness Encounter (Swamp)": () => getWeightedRandomItem([
        { value: "Quicksand", weight: 25 },
        { value: "Will-o'-the-wisp", weight: 20 },
        { value: "Witch hut", weight: 30 },
        { value: "Rotting bridge", weight: 15 },
        { value: "Undead ambush", weight: 10 }
      ]),
      "Road Encounter": () => getWeightedRandomItem([
        { value: "Broken cart", weight: 25 },
        { value: "Highway robbers", weight: 20 },
        { value: "Noble caravan", weight: 30 },
        { value: "Stray animal", weight: 15 },
        { value: "Bridge toll", weight: 10 }
      ]),
      "Urban Encounter": () => getWeightedRandomItem([
        { value: "Pickpocket attempt", weight: 30 },
        { value: "Street performer", weight: 25 },
        { value: "Local riot", weight: 10 },
        { value: "Guard checkpoint", weight: 20 },
        { value: "Merchant scam", weight: 15 }
      ]),

      "NPC Motivation": ["Revenge", "Greed", "Love", "Justice", "Power"],
      "NPC Description": [
        "Male, black hair, scarred face",
        "Female, red hair, missing eye",
        "Non-binary, silver hair, glowing tattoo",
        "Male, bald, gold tooth",
        "Female, braided hair, limping"
      ],

      "D100 Roll": () => Math.floor(Math.random() * 100) + 1,
      "D20 Roll": () => Math.floor(Math.random() * 20) + 1,

      "Encounter Difficulty": ["Trivial", "Easy", "Moderate", "Hard", "Deadly"],

      "Wound": ["Bruised rib", "Broken finger", "Dislocated shoulder", "Sprained ankle"],
      "Major Wound": ["Crushed leg", "Blinded eye", "Severed hand", "Internal bleeding"],

      "Medieval Insult": [
        "Thou art a boil-brained knave!",
        "You crusty batch of nature!",
        "Thou goatish hedge-born scullion!"
      ],
      "Medieval Greeting": [
        "Good morrow, traveler!",
        "Hail and well met!",
        "May fortune favor thee!"
      ]
    };

    // --- Render Buttons + Results ---
    const container = document.getElementById("generatorGrid");

    Object.entries(generators).forEach(([label, data]) => {
      const box = document.createElement("div");
      box.className = "box";

      const btn = document.createElement("button");
      btn.textContent = `Generate ${label}`;

      const result = document.createElement("div");
      result.className = "result";

      const generate = () => {
        const value = typeof data === "function" ? data() : getRandomItem(data);
        result.textContent = value;
      };

      btn.addEventListener("click", generate);
      box.appendChild(btn);
      box.appendChild(result);
      container.appendChild(box);

      // Auto-generate on load
      generate();
    });
  </script>
</body>
</html>
